window.DL=window.DL||{};(function(_,DL){"use strict";var iconTypes=document.querySelectorAll('[data-type="icon-list"]'),Icons={};if(!iconTypes.length){return false}function iconsList(group,vendor){var obj=Object.create(Object.prototype,{Icons:{value:{optionsGroups:[],options:[],currVendor:"",currVendorPrefix:"",setCurrVendor:function(vendor){this.currVendor=vendor},setCurrVendorPrefix:function(prefix){this.currVendorPrefix=prefix},buildOptionsGroups:function(optgroup){this.optionsGroups[this.currVendor]=[];_.forEach(optgroup.childNodes,function(option){this.optionsGroups[this.currVendor].push(option.getAttribute("value"))},this)},build:function(optgroup,prefix,vendor){this.setCurrVendor(vendor);this.setCurrVendorPrefix(prefix);this.buildOptionsGroups(optgroup)}}},IconsBuilder:{value:{list:document.createDocumentFragment(),build:function(icons,el){el=el?el:"li";var options=icons.optionsGroups[icons.currVendor.toLowerCase()];_.forEach(options,function(icon){var iconClass=icon.replace(icons.currVendor+"::",""),item=document.createElement(el),i=document.createElement("i");i.setAttribute("class",icons.currVendorPrefix+" "+iconClass);item.classList.add("dltype-current-icons-grid__item");item.setAttribute("data-icon-value",icon);item.appendChild(i);this.list.appendChild(item)},this)}}}});obj.Icons.build(group,vendor.getAttribute("data-vendor-prefix"),vendor.getAttribute("value"));obj.IconsBuilder.build(obj.Icons);return obj}function buildIconsList(vendor,select){var selectedVendor=vendor.selectedOptions[0],group=select.querySelector('optgroup[label="'+selectedVendor.getAttribute("value")+'"]');return iconsList(group,selectedVendor)}function updateIconsList(vendor,list){Icons=buildIconsList(vendor,list);var currGrid=document.getElementById("dltype-current-icons-grid");if(!currGrid){currGrid=document.createElement("ul");currGrid.setAttribute("id","dltype-current-icons-grid");currGrid.setAttribute("class","dltype-current-icons-grid")}else{while(currGrid.firstChild){currGrid.removeChild(currGrid.firstChild)}}currGrid.appendChild(Icons.IconsBuilder.list);setDisplayIconsGridEl("flex");return currGrid}function updateCurrentIcon(icon,value){var iconClass=value.replace(Icons.Icons.currVendor+"::","")+" dltype-icon-list-current";icon.setAttribute("class",Icons.Icons.currVendorPrefix+" "+iconClass)}function setVisibilityCurrentIconEl(container,value){var el=container.querySelector(".dltype-icon-list-current");if(el){el.style.visibility=value}}function setDisplayIconsGridEl(value){var grid=document.getElementById("dltype-current-icons-grid");if(grid){grid.style.display=value}}function setNoneValue(selectInput){setVisibilityCurrentIconEl(selectInput.parentElement,"hidden");setDisplayIconsGridEl("none");selectInput.value="none"}_.forEach(iconTypes,function(list){var currIcon=list.parentElement.getElementsByClassName("dltype-icon-list-current")[0],vendorsList=list.previousElementSibling;if("none"===vendorsList.value){setVisibilityCurrentIconEl(currIcon.parentElement,"hidden")}if(vendorsList){list.style.display="none";vendorsList.addEventListener("change",function(e){if("none"!==e.target.value){updateIconsList(e.target,list);DL.Utils.Events.dispatchEvent("click",currIcon,null,{referer:"list"})}else{setNoneValue(list)}});currIcon.addEventListener("click",function(e){if("none"!==vendorsList.value){var currGrid=document.getElementById("dltype-current-icons-grid"),vendor=this.previousElementSibling.previousElementSibling,list=this.previousElementSibling;if(currGrid&&"flex"===currGrid.style.display&&typeof e.detail.referer==="undefined"){setDisplayIconsGridEl("none");return false}this.parentNode.insertBefore(updateIconsList(vendor,list),this.nextSibling);_.forEach(document.getElementsByClassName("dltype-current-icons-grid__item"),function(item){item.addEventListener("click",function(e){var iconValue=this.getAttribute("data-icon-value");if(!iconValue){return false}updateCurrentIcon(currIcon,iconValue);list.value=iconValue})});setVisibilityCurrentIconEl(list.parentElement,"visible",currGrid)}else{setNoneValue(list)}})}})})(_,window.DL);