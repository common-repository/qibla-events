window.DL=window.DL||{};(function(_,$,dllocalized,DL){"use strict";var ContactForm={requestModal:function(evt){evt.preventDefault();evt.stopImmediatePropagation();DL.Modal.construct("script",{url:window.dllocalized.site_url+"/index.php",data:{dlajax_action:"modal_contact_form_request"},beforeSend:null,complete:null},evt)},buildForm:function(){if(!DL.Modal.LoginRegisterForm.isInUse){this.form=DL.Form.getForm(DL.Modal.modal.querySelector("#qibla_contact_form"),{scrollOnTopAfterSubmit:false,ajaxAction:"contact_form_request",extraFields:{mailto:{type:"hidden",name_suffix:"mailto",sanitize:"sanitize_email",filter_id:513,value:this.mailTo}}});this.form.init()}},addListeners:function(){var addListener=DL.Utils.Events.addListener.bind(this);addListener(this.modalElement,"click",this.requestModal);addListener(this.modalElement,"preload-modal",this.requestModal,{once:true});addListener(window,"dl_modal_opened",this.buildForm);addListener(window,"dl_modal_closed",function(){window.removeEventListener("dl_modal_opened",this.buildForm,true)}.bind(this))},init:function(){this.addListeners()},construct:function(){_.bindAll(this,"requestModal","addListeners","buildForm");this.modalElement=document.querySelector(".dlsocials-links__link--email");if(!this.modalElement){return}this.mailTo=this.modalElement.getAttribute("href").replace("mailto:","");this.form=null;return this}};window.addEventListener("load",function(){setTimeout(function(){if(ContactForm.construct()){ContactForm.init();DL.Utils.Events.dispatchEvent("preload-modal",ContactForm.modalElement)}},0)})})(_,window.jQuery,window.dllocalized,window.DL);