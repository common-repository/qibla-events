window.DL=window.DL||{};(function(_,dllocalized,DL,googleMaps){"use strict";DL.Geo=DL.Geo||{};DL.Geo.Geocode={geocode:function(success,error){var data={};if(_.isEmpty(this.geocoderRequest)){throw"Cannot geocode empty data."}this.geocoder.geocode(this.geocoderRequest,function(geocoderResult,statusCode){switch(statusCode){case googleMaps.GeocoderStatus.OK:var result=geocoderResult[0];data={lat:result.geometry.location.lat(),lng:result.geometry.location.lng(),address:result.formatted_address};if(_.isFunction(success)){success(data)}break;case googleMaps.GeocoderStatus.ZERO_RESULTS:break;default:console.warn("Qibla Geocoding Issue: "+geocoderResult[1]);if(_.isFunction(error)){error(data)}break}});return this},construct:function(address,reverse){if(!_.isFunction(googleMaps.Geocoder)){return}var context=reverse?"location":"address";this.geocoder=new googleMaps.Geocoder;this.geocoderRequest={};if(address){this.geocoderRequest[context]=address}return this}};DL.Geo.GeocodeFactory=function(address,reverse){return Object.create(DL.Geo.Geocode).construct(address,reverse)}})(_,window.dllocalized,window.DL,window.google.maps);